<link rel="import" href="../bower_components/polymer/polymer.html">

<link rel="import" href="ha-action-dialog.html">
<link rel="import" href="../cards/state-card-content.html">
<link rel="import" href="../more-infos/more-info-content.html">

<polymer-element name="state-card-dialog" attributes="api">
<template>
  <ha-action-dialog id="dialog">

    <style>
    .title-card {
      margin-bottom: 24px;
    }
    </style>

    <div>
      <state-card-content stateObj="{{stateObj}}" api="{{api}}" class='title-card'>
      </state-card-content>
      <more-info-content stateObj="{{stateObj}}" api="{{api}}"></more-info-content>
    </div>

    <paper-button dismissive>Dismiss</paper-button>
    <paper-button affirmative on-click={{editClicked}}>Edit State</paper-button>
  </ha-action-dialog>

</template>
<script>
Polymer({
  stateObj: {},

  // domReady: function() {
  //   this.$.dialog.addEventListener('core-overlay-open-completed', function() {
  //     this.$.dialog.resizeHandler();
  //   }.bind(this));
  // },

  show: function(stateObj) {
    this.stateObj = stateObj;
    this.$.dialog.toggle();
  },

  editClicked: function(ev) {
    this.api.showEditStateDialog(this.stateObj.entity_id);
  }

});
</script>
</polymer-element>
